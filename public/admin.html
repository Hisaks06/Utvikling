<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">
</head>
<body>

    <input type="checkbox" name="" id="check">
    <div class="menu">
        <label for="check" id="label" style="
        margin-bottom: 0px;">
            <span class="fas fa-times" id="times"></span>
            <span class="fas fa-bars" id="bars"></span>
        </label>
        <div class="head">Meny</div>
        <ol>
            <li class="nav"><a href="app.html" class="tab"><i class="fas fa-home"></i>Hjem</a></li>
            <li class="nav"><a href="profile.html" class="tab"><i class="fas fa-user"></i>Profil</a></li>
            <li class="nav" id="adminTab"><a href="admin.html" class="tab"><i class="fas fa-user-cog"></i>Admin</a></li>
            <li class="nav"><a href="projects.html" class="tab"><i class="fas fa-project-diagram"></i>Prosjekt</a></li>
            <li class="nav"><a href="login.html" class="tab"><i class="fas fa-door-open"></i>Logg Ut</a></li>
        </ol>
    </div>
    <br>
    <h1>Admin</h1>
    <article>
        <table>
            <thead>
                <tr>
                    <th>Username</th>
                    <th>Firstname</th>
                    <th>Lastname</th>
                    <th>Email</th>
                    <th>Mobile</th>
                    <th>Age</th>
                    <th>Role</th>
                </tr>
            </thead>
            <tbody id="adminDataBody"></tbody>
        </table>
    </article>
    <script>
        // Fetch data from the server and display it in the table
        fetch('/admin/data')
            .then(response => response.json())
            .then(data => {
                const adminDataBody = document.getElementById('adminDataBody');
                data.forEach(item => {
                    const row = `
                        <tr>
                            <td>${item.username}</td>
                            <td>${item.firstname}</td>
                            <td>${item.lastname}</td>
                            <td>${item.email}</td>
                            <td>${item.mobile}</td>
                            <td>${item.age}</td>
                            <td>${item.role}</td>
                        </tr>
                    `;
                    adminDataBody.innerHTML += row;
                });
            })
            .catch(error => console.error('Error fetching admin data:', error));
    </script>
</body>
</html>
